
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A remote monitoring and management tool">
      
      
        <meta name="author" content="Ylianst and contributors">
      
      
        <link rel="canonical" href="https://ylianst.github.io/MeshCentral/meshcentral/debugging/">
      
      
        <link rel="prev" href="../codesigning/">
      
      
        <link rel="next" href="../devicetabs/">
      
      
        
      
      
      <link rel="icon" href="../../images/favicon.ico">
      <meta name="generator" content="zensical-0.0.24">
    
    
      
        <title>Debugging - MeshCentral Documentation</title>
      
    
    
      
        
      
      <link rel="stylesheet" href="../../assets/stylesheets/modern/main.28978c9b.min.css">
      
        
          
        
        <link rel="stylesheet" href="../../assets/stylesheets/modern/palette.dfe2e883.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,500,500i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Inter";--md-code-font:"JetBrains Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,t)=>(e<<5)-e+t.charCodeAt(0)),0),__md_get=(e,t=localStorage,a=__md_scope)=>JSON.parse(t.getItem(a.pathname+"."+e)),__md_set=(e,t,a=localStorage,_=__md_scope)=>{try{a.setItem(_.pathname+"."+e,JSON.stringify(t))}catch(e){}},document.documentElement.setAttribute("data-platform",navigator.platform)</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#debugging" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="MeshCentral Documentation" class="md-header__button md-logo" aria-label="MeshCentral Documentation" data-md-component="logo">
      
  <img src="../../images/favicon.ico" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="lucide lucide-menu" viewBox="0 0 24 24"><path d="M4 5h16M4 12h16M4 19h16"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            MeshCentral Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Debugging
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="none" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="none" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="lucide lucide-search" viewBox="0 0 24 24"><path d="m21 21-4.34-4.34"/><circle cx="11" cy="11" r="8"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog" aria-label="Search">
  <button type="button" class="md-search__button">
    Search
  </button>
</div>
      
    
    <div class="md-header__source">
      
        <a href="https://github.com/Ylianst/MeshCentral" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    Ylianst/MeshCentral
  </div>
</a>
      
    </div>
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../.." class="md-tabs__link">
          
  
  Home

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../install/abstract/" class="md-tabs__link">
          
  
  Install

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  MeshCentral

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../meshcmd/" class="md-tabs__link">
          
  
  Submodules and Features

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../how-to-contribute/" class="md-tabs__link">
        
  
  How to Contribute

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../design/" class="md-tabs__link">
        
  
  Design and Architecture

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../other/adfs_sso_guide/" class="md-tabs__link">
          
  
  Other

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="MeshCentral Documentation" class="md-nav__button md-logo" aria-label="MeshCentral Documentation" data-md-component="logo">
      
  <img src="../../images/favicon.ico" alt="logo">

    </a>
    MeshCentral Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Ylianst/MeshCentral" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    Ylianst/MeshCentral
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Home
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Abstract
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Install
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Install
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/abstract/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Abstract
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/quickstart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quickstart
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Installation Guides
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Installation Guides
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/abstract/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Abstract
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/advanced/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Advanced
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/container/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Container (Docker)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/windows/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Windows
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Databases
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Databases
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/database/mongodb/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MongoDB
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/database/postgresql/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    PostgreSQL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/database/mariadb/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MariaDB/MySQL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/database/local/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Local Databases
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5" >
        
          
          <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Security
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Security
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/security/crowdsec/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Crowdsec
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/security/secure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Secure Installation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    MeshCentral
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    MeshCentral
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MeshCentral Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    All Configuration Options
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../SSLnletsencrypt/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SSL/TLS
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../agents/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Agent Information
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../assistant/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Assistant
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../codesigning/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Code Signing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Debugging
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="././" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Debugging
  

    
  </span>
  
  

      </a>
      
        


<nav class="md-nav md-nav--secondary" aria-label="On this page">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      On this page
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#websockets-video" class="md-nav__link">
    <span class="md-ellipsis">
      
        Websockets Video
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#meshcentral-server" class="md-nav__link">
    <span class="md-ellipsis">
      
        MeshCentral Server
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MeshCentral Server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#useful-configjs-settings" class="md-nav__link">
    <span class="md-ellipsis">
      
        Useful config.js settings
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#understanding-node-and-paths" class="md-nav__link">
    <span class="md-ellipsis">
      
        Understanding node and paths
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unable-to-update-server" class="md-nav__link">
    <span class="md-ellipsis">
      
        Unable to update server
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#port-troubleshooting-on-server" class="md-nav__link">
    <span class="md-ellipsis">
      
        Port Troubleshooting on server
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#running-meshcentral-server-in-debug-mode" class="md-nav__link">
    <span class="md-ellipsis">
      
        Running Meshcentral server in debug mode
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enabling-trace-in-your-browser-dev-tools" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enabling trace in your browser Dev Tools
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#finding-agent-problems" class="md-nav__link">
    <span class="md-ellipsis">
      
        Finding agent problems
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logging-it-all" class="md-nav__link">
    <span class="md-ellipsis">
      
        Logging it all
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#restricting-server-to-specific-ips" class="md-nav__link">
    <span class="md-ellipsis">
      
        Restricting server to specific IP(s)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#finding-system-id-types" class="md-nav__link">
    <span class="md-ellipsis">
      
        Finding system ID types
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pull-down-cert-crt-file-from-internet" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pull down cert .crt file from internet
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#meshagent" class="md-nav__link">
    <span class="md-ellipsis">
      
        MeshAgent
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MeshAgent">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agent-debug-logs-to-server" class="md-nav__link">
    <span class="md-ellipsis">
      
        Agent Debug Logs to server
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#determine-agent-capabilities" class="md-nav__link">
    <span class="md-ellipsis">
      
        Determine Agent capabilities
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#useful-meshagentmsh-flags" class="md-nav__link">
    <span class="md-ellipsis">
      
        Useful MeshAgent.msh flags
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#obtain-generated-msh-file" class="md-nav__link">
    <span class="md-ellipsis">
      
        Obtain generated .msh File
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#meshagent-commands" class="md-nav__link">
    <span class="md-ellipsis">
      
        MeshAgent Commands
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#on-the-fly-patching-meshagent" class="md-nav__link">
    <span class="md-ellipsis">
      
        On the fly Patching MeshAgent
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agent-debugging-using-meshcore-js-debugger" class="md-nav__link">
    <span class="md-ellipsis">
      
        Agent Debugging using MeshCore JS Debugger
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#troubleshooting-agent-connectivity" class="md-nav__link">
    <span class="md-ellipsis">
      
        Troubleshooting Agent connectivity
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#intel-amt" class="md-nav__link">
    <span class="md-ellipsis">
      
        Intel AMT
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../devicetabs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Device Tabs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../plugins/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Plugins
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../security/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Security
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tokens/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tokens
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../faq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    FAQ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tipsntricks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tips n Tricks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../messaging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Messaging
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../customization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Customization
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../openidConnectStrategy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OpenID Connect Strategy (OIDC)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Submodules and Features
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Submodules and Features
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../meshcmd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MeshCmd
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../meshctrl/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MeshCtrl
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../meshrouter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Mesh Router
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../intelamt/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Intel AMT
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how-to-contribute/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    How to Contribute
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../design/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Design and Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Other
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Other
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../other/adfs_sso_guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADFS SSO Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../other/meshcentral_satellite/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MeshCentral Satellite
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--secondary" aria-label="On this page">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      On this page
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#websockets-video" class="md-nav__link">
    <span class="md-ellipsis">
      
        Websockets Video
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#meshcentral-server" class="md-nav__link">
    <span class="md-ellipsis">
      
        MeshCentral Server
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MeshCentral Server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#useful-configjs-settings" class="md-nav__link">
    <span class="md-ellipsis">
      
        Useful config.js settings
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#understanding-node-and-paths" class="md-nav__link">
    <span class="md-ellipsis">
      
        Understanding node and paths
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unable-to-update-server" class="md-nav__link">
    <span class="md-ellipsis">
      
        Unable to update server
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#port-troubleshooting-on-server" class="md-nav__link">
    <span class="md-ellipsis">
      
        Port Troubleshooting on server
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#running-meshcentral-server-in-debug-mode" class="md-nav__link">
    <span class="md-ellipsis">
      
        Running Meshcentral server in debug mode
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enabling-trace-in-your-browser-dev-tools" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enabling trace in your browser Dev Tools
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#finding-agent-problems" class="md-nav__link">
    <span class="md-ellipsis">
      
        Finding agent problems
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logging-it-all" class="md-nav__link">
    <span class="md-ellipsis">
      
        Logging it all
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#restricting-server-to-specific-ips" class="md-nav__link">
    <span class="md-ellipsis">
      
        Restricting server to specific IP(s)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#finding-system-id-types" class="md-nav__link">
    <span class="md-ellipsis">
      
        Finding system ID types
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pull-down-cert-crt-file-from-internet" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pull down cert .crt file from internet
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#meshagent" class="md-nav__link">
    <span class="md-ellipsis">
      
        MeshAgent
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MeshAgent">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agent-debug-logs-to-server" class="md-nav__link">
    <span class="md-ellipsis">
      
        Agent Debug Logs to server
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#determine-agent-capabilities" class="md-nav__link">
    <span class="md-ellipsis">
      
        Determine Agent capabilities
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#useful-meshagentmsh-flags" class="md-nav__link">
    <span class="md-ellipsis">
      
        Useful MeshAgent.msh flags
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#obtain-generated-msh-file" class="md-nav__link">
    <span class="md-ellipsis">
      
        Obtain generated .msh File
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#meshagent-commands" class="md-nav__link">
    <span class="md-ellipsis">
      
        MeshAgent Commands
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#on-the-fly-patching-meshagent" class="md-nav__link">
    <span class="md-ellipsis">
      
        On the fly Patching MeshAgent
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agent-debugging-using-meshcore-js-debugger" class="md-nav__link">
    <span class="md-ellipsis">
      
        Agent Debugging using MeshCore JS Debugger
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#troubleshooting-agent-connectivity" class="md-nav__link">
    <span class="md-ellipsis">
      
        Troubleshooting Agent connectivity
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#intel-amt" class="md-nav__link">
    <span class="md-ellipsis">
      
        Intel AMT
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  
  
  


<h1 id="debugging">Debugging</h1>
<h2 id="websockets-video">Websockets Video</h2>
<p>Make sure you understand how MeshCentral works with your browser using chrome developer tools.</p>
<div class="video-wrapper">
  <iframe width="320" height="180" src="https://www.youtube.com/embed/3vI4URd3VzU" frameborder="0" allowfullscreen></iframe>
</div>

<h2 id="meshcentral-server">MeshCentral Server</h2>
<h3 id="useful-configjs-settings">Useful config.js settings</h3>
<p><a href="https://github.com/Ylianst/MeshCentral/blob/master/meshcentral-config-schema.json">https://github.com/Ylianst/MeshCentral/blob/master/meshcentral-config-schema.json</a></p>
<div class="highlight"><pre><span></span><code><span class="nt">&quot;AgentsInRAM&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="nt">&quot;AgentUpdateBlockSize&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2048</span><span class="p">,</span>
<span class="nt">&quot;agentUpdateSystem&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="nt">&quot;noAgentUpdate&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="nt">&quot;WsCompression&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="nt">&quot;AgentWsCompression&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
</code></pre></div>
<h3 id="understanding-node-and-paths">Understanding node and paths</h3>
<p>Note that when running MeshCentral, you should always run from the path that is parent to node_modules, so you do this:</p>
<div class="highlight"><pre><span></span><code>cd C:\Program Files\Open Source\MeshCentral
node node_modules\meshcentral
</code></pre></div>
<p>You do NOT do this:</p>
<div class="highlight"><pre><span></span><code>cd C:\Program Files\Open Source\MeshCentral\node_modules\meshcentral
node meshcentral
</code></pre></div>
<p>The problem with the second command is that NPM may install missing modules in the incorrect location.</p>
<p>Also, in general I recommend not using the MeshCentral MSI Installer and just install manually unless you are very scared of the command prompt. Anyone that knows a bit about the shell should install MeshCentral like this:</p>
<div class="highlight"><pre><span></span><code>mkdir c:\meshcentral
cd c:\meshcentral
npm install meshcentral
node node_modules\meshcentral
(ctrl-c when done installing optional modules)
node node_modules\meshcentral --install
</code></pre></div>
<p>This way, you have a lot more control over what is going on. In my opinion, the MSI installer basically does the same thing and installs NodeJS for you.</p>
<h3 id="unable-to-update-server">Unable to update server</h3>
<p>Generally the problem is that MeshCentral can't find the npm tool and therefore, can't run it to see if there is a new version. You can fix this by setting the path to npm in the config.json like this:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;settings&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;npmPath&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;c:\\npm.exe&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;npmProxy&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;http://1.2.3.4:80&quot;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>The problem could also be that you need a proxy, the configuration line to that is above.</p>
<p>You can also manually update. Just stop your server and so this:</p>
<div class="highlight"><pre><span></span><code>mv<span class="w"> </span>node_modules<span class="w"> </span>node_modules_bak
npm<span class="w"> </span>install<span class="w"> </span>meshcentral
node<span class="w"> </span>node_modules/meshcentral
</code></pre></div>
<p>Then wait for all optional modules to install, then once the server starts hit ctrl-c and start up the server again. You can also use the following to help you start/stop the server:</p>
<div class="highlight"><pre><span></span><code>node<span class="w"> </span>node_modules/meshcentral<span class="w"> </span>--install
node<span class="w"> </span>node_modules/meshcentral<span class="w"> </span>--uninstall
node<span class="w"> </span>node_modules/meshcentral<span class="w"> </span>--start
node<span class="w"> </span>node_modules/meshcentral<span class="w"> </span>--stop
</code></pre></div>
<h3 id="port-troubleshooting-on-server">Port Troubleshooting on server</h3>
<p>If you're getting a <code>port 4433 is not available</code> error, this is because another process is using this port, very likely another instance of MeshCentral. If your MeshCentral server is bound to ports 81/444 MeshCentral could not get port 80/443 and got the next available ones.</p>
<p>In general the problem is that you are running two MeshCentral instances at the same time. Probably one as a background Windows Service and one in the command line. Which ever instance can grab port 4433 will have a running MPS and CIRA should work, but the second instance will not have port 4433 and CIRA will not work.</p>
<h3 id="running-meshcentral-server-in-debug-mode">Running Meshcentral server in debug mode</h3>
<p>Debug more will cause MeshCentral to output a lot of debug messages to the console. To display all debug messages, run MeshCentral like this:</p>
<div class="highlight"><pre><span></span><code>node<span class="w"> </span>node_modules/meshcentral<span class="w"> </span>--debug
</code></pre></div>
<p>A more practical way to run the debug command it to specify what messages you want printed out using a comma seperated list, for example:</p>
<div class="highlight"><pre><span></span><code>node<span class="w"> </span>node_modules/meshcentral<span class="w"> </span>--debug<span class="w"> </span>web,amt,mps
</code></pre></div>
<p>Here is the list of all debug options:</p>
<div class="highlight"><pre><span></span><code>cookie       - Cookie encoder
dispatch     - Message Dispatcher
main         - Main Server Messages
peer         - MeshCentral Server Peering
agent        - MeshAgent traffic
agentupdate  - MeshAgent update
cert         - Server Certificate
db           - Server Database
email        - Email/SMS/Push Traffic
web          - Web Server
webrequest   - Web Server Requests
relay        - Web Socket Relay
httpheaders  - Web Server HTTP Headers
authlog      - User Authentication Log
amt          - Intel AMT
webrelay     - Connection Relay
mps          - CIRA Server
mpscmd       - CIRA Server Commands
</code></pre></div>
<p>You can also specify the <code>debug</code> option in the config.json file in the <code>settings</code> section. For example:</p>
<div class="highlight"><pre><span></span><code>&quot;settings&quot;: {
  &quot;debug&quot;: &quot;web,amt,mps&quot;
}
</code></pre></div>
<h3 id="enabling-trace-in-your-browser-dev-tools">Enabling trace in your browser Dev Tools</h3>
<p>You can enable browser console tracing by adding <code>trace=1</code> as a parameter to the URL of the MeshCentral main web page. For example <code>https://myserver.com/?trace=1</code>. Once present, open the browser's console window to see all web client tracing messages.</p>
<p>To log all database queries, change log_statement in /etc/postgresql/13/main/postgresql.conf</p>
<div class="highlight"><pre><span></span><code># CUSTOM
log_statement = &#39;all&#39;           # none, ddl, mod, all
</code></pre></div>
<p>The stacktrace was logged to <code>stdout/journalctl</code>. Supposedly, you can enable debug logging for node modules by adding <code>DEBUG=&lt;modulename&gt;</code> to the environment. </p>
<p>Adding this to <code>/etc/systemd/system/meshcentral.service</code> should do it but it didn't seem to do anything. </p>
<p>I think that's because Mesh uses the trace logging in the browser instead of logging things in the server logs. </p>
<div class="highlight"><pre><span></span><code>Environment=DEBUG=mesh*
</code></pre></div>
<p>If you want to change node to meshcentral in journalctl, add this to /etc/systemd/system/meshcentral.service.</p>
<div class="highlight"><pre><span></span><code>SyslogIdentifier=meshcentral
</code></pre></div>
<h3 id="finding-agent-problems">Finding agent problems</h3>
<p>Using the servers <code>My Server &gt; console</code></p>
<ul>
<li><code>agentstatus</code> - Gives you summary counts of problems</li>
<li><code>agentissues</code> - Gives IP:port and what error</li>
<li><code>dupagents</code> - Gives duplicateAgent IP's, counts and names</li>
</ul>
<h3 id="logging-it-all">Logging it all</h3>
<p>To log everything that's possible, prepare the log directory.</p>
<div class="highlight"><pre><span></span><code>mkdir /meshcentral/meshcentral-logs/
chown tactical:tactical logs
ln -s ../meshcentral-logs/log.txt /meshcentral/meshcentral-data/log.txt
</code></pre></div>
<p>And then add this to your config.</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="nt">&quot;meshErrorLogPath&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/meshcentral/meshcentral-logs/&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;authLog&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/meshcentral/meshcentral-logs/auth.log&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;log&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">&quot;cookie&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;dispatch&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;main&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;peer&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;web&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;webrequest&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;relay&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;webrelaydata&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;webrelay&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;mps&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;mpscmd&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;swarm&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;swarmcmd&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;agentupdate&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;agent&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;cert&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;db&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;email&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;amt&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;httpheaders&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;websocket&quot;</span>
<span class="w">    </span><span class="p">],</span>
</code></pre></div>
<p>You'll then have 3 files:</p>
<div class="highlight"><pre><span></span><code>-rw-rw-r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>tactical<span class="w"> </span>tactical<span class="w">   </span><span class="m">2593</span><span class="w"> </span>Feb<span class="w">  </span><span class="m">2</span><span class="w"> </span><span class="m">12</span>:22<span class="w"> </span>auth.log
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>tactical<span class="w"> </span>tactical<span class="w"> </span><span class="m">147593</span><span class="w"> </span>Feb<span class="w">  </span><span class="m">2</span><span class="w"> </span><span class="m">12</span>:31<span class="w"> </span>log.txt
-rw-rw-r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>tactical<span class="w"> </span>tactical<span class="w">    </span><span class="m">381</span><span class="w"> </span>Feb<span class="w">  </span><span class="m">2</span><span class="w"> </span><span class="m">12</span>:02<span class="w"> </span>mesherrors.txt
</code></pre></div>
<p><code>log.txt</code> will now log everything in the Trace tab</p>
<h3 id="restricting-server-to-specific-ips">Restricting server to specific IP(s)</h3>
<p>When doing debugging on my development server, I use this line in the settings section to block all agent connections except the agent I want:</p>
<div class="highlight"><pre><span></span><code>&quot;agentAllowedIp&quot;: [ &quot;192.168.2.147&quot; ],
</code></pre></div>
<p>Of course, this is just for debugging.</p>
<h3 id="finding-system-id-types">Finding system ID types</h3>
<p><a href="https://serverurl/meshagents">https://serverurl/meshagents</a> aka trying figure out what this is</p>
<p><img alt="ID" src="../images/determine-id.jpg" /></p>
<h3 id="pull-down-cert-crt-file-from-internet">Pull down cert .crt file from internet</h3>
<p><a href="https://github.com/Ylianst/MeshCentral/issues/1662#issuecomment-666559391">See #1662</a> We have run into this challenge before, where our .crt file expired and then all our agents were unable to connect. In our case, the TLS cert was available on the internet, and thus, we were able to use these commands to update it:</p>
<div class="highlight"><pre><span></span><code><span class="nb">echo</span><span class="w"> </span>-n<span class="w"> </span><span class="se">\|</span><span class="w"> </span>openssl<span class="w"> </span>s_client<span class="w"> </span>-connect<span class="w"> </span>yourdomain.com:443<span class="w"> </span><span class="m">2</span>&gt;<span class="w"> </span>/dev/null<span class="se">\|</span><span class="w"> </span>sed<span class="w"> </span>-ne<span class="w"> </span><span class="s1">&#39;/-BEGIN   CERTIFICATE-/,/-END CERTIFICATE-/p&#39;</span><span class="w"> </span>&gt;<span class="w"> </span>/opt/meshcentral/meshcentral-data/webserver-cert-public.crt
service<span class="w"> </span>meshcentral<span class="w"> </span>restart
</code></pre></div>
<h2 id="meshagent">MeshAgent</h2>
<p>Troubleshooting agent</p>
<div class="highlight"><pre><span></span><code>./meshagent<span class="w"> </span>-state
</code></pre></div>
<h3 id="agent-debug-logs-to-server">Agent Debug Logs to server</h3>
<p>This automatically downloads all agent error logs into <code>meshcentral-data/agenterrorlogs.txt</code></p>
<p><a href="https://github.com/Ylianst/MeshCentral/blob/aa58afcc3a5d738177ab7a7b6d0228d72af82b85/meshcentral-config-schema.json#L100">Set</a> in <code>config.json</code></p>
<div class="highlight"><pre><span></span><code><span class="nt">&quot;agentLogDump&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
</code></pre></div>
<h3 id="determine-agent-capabilities">Determine Agent capabilities</h3>
<p>On the server goto the agents console tab. Type:</p>
<div class="highlight"><pre><span></span><code>info
</code></pre></div>
<h3 id="useful-meshagentmsh-flags">Useful MeshAgent.msh flags</h3>
<p><a href="https://github.com/Ylianst/MeshAgent/blob/master/meshcore/agentcore.h#L190">https://github.com/Ylianst/MeshAgent/blob/master/meshcore/agentcore.h#L190</a></p>
<div class="highlight"><pre><span></span><code><span class="err">co</span><span class="kc">ntr</span><span class="err">olCha</span><span class="kc">nnel</span><span class="err">Debug=</span><span class="mi">1</span>
<span class="err">logUpda</span><span class="kc">te</span><span class="err">=</span><span class="mi">1</span>
</code></pre></div>
<h3 id="obtain-generated-msh-file">Obtain generated .msh File</h3>
<p>If you need a trick to get the .msh file, you can add ?debug=1 to the URL and click "Add Agent", there will be an extra link to download it.</p>
<h3 id="meshagent-commands">MeshAgent Commands</h3>
<div class="highlight"><pre><span></span><code>MeshAgent run
MeshAgent dbTool.js list
</code></pre></div>
<p>Forcing Core version from Cmdline</p>
<ul>
<li>Download meschore.js and rename to CoreModule.js and put it alongside MeshAgent.exe</li>
<li>Stop MeshAgent service</li>
<li>Run <code>MeshAgent.exe dbTool.js import CoreModule</code></li>
</ul>
<h3 id="on-the-fly-patching-meshagent">On the fly Patching MeshAgent</h3>
<p><a href="https://github.com/Ylianst/MeshAgent/issues/89#issuecomment-949901720">MeshAgent#89 (comment)</a></p>
<p>There are two ways to do this... When debugging, and making changes, you can modify the .js file directly, and just save it in the same folder as the agent binary... The agent will use the .js file from disc if it's there, if it's newer than the one compiled in the binary. You don't even need to restart the agent. You can just clear the core, and reload the core.....</p>
<p>When you are satisfied with your changes to the .js file, you can use the clipboard, in the following fashion:</p>
<div class="highlight"><pre><span></span><code>meshagent<span class="w"> </span>-exec<span class="w"> </span><span class="s2">&quot;require(&#39;clipboard&#39;).nativeAddCompressedModule(&#39;foo&#39;);process.exit();&quot;</span>
</code></pre></div>
<p>if the file you modified isn't in the same folder as the agent binary, you can use the following command if you don't want to move the file, and edit it directly in the modules folder:</p>
<div class="highlight"><pre><span></span><code>meshagent<span class="w"> </span>-exec<span class="w"> </span><span class="s2">&quot;setModulePath(&#39;pathToFolder&#39;);require(&#39;clipboard&#39;).nativeAddCompressedModule(&#39;foo&#39;);process.exit();&quot;</span>
</code></pre></div>
<p>This command is just like the previous, except it searches for modules in the path specified.</p>
<p>Just substitute foo, with the name of the module that you modified. It will load the module from disc, compress it, and save it into the clipboard.. So you can just load up your editor for ILibDuktape_Polyfills.c, and find where that particular module is defined... and paste directly from the clipboard... The clipboard will contain all the necessary C code to uncompress and load the module.</p>
<p>If the compressed result is relatively long, it will auto break it up into multiple lines to work around an issue with visual studio's maximum string literal limitations.</p>
<h3 id="agent-debugging-using-meshcore-js-debugger">Agent Debugging using MeshCore JS Debugger</h3>
<p><a href="https://github.com/Ylianst/MeshAgent/issues/119">(#119)</a> How to test changes to the meshagent and recompile them.</p>
<ul>
<li>Copy duktape-debugger.js to the mesh directory on the target machine.</li>
<li>From the console tab of the agent, enter this command, substituting the port number you want to use instead of 9999
<code>eval "attachDebugger({ webport: 9999 })"</code></li>
</ul>
<p>Then open your browser to http://localhost:9999 or whatever port you used.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you pause the debugger, and happen to forget about it, the agent will automatically kill itself and restart because it will think that a thread is stuck. Default debugger timeout is 10 minutes, you may find a log entry saved to disk saying "Microstack Thread STUCK", or something similar.</p>
</div>
<h3 id="troubleshooting-agent-connectivity">Troubleshooting Agent connectivity</h3>
<p>If an agent keeps disconnecting and reconnecting, add this line to the "settings" section of the config.json:</p>
<div class="highlight"><pre><span></span><code>&quot;agentping&quot;: 30
</code></pre></div>
<p>This will cause MeshCentral to "ping" the agent every 30 seconds and the agent to respond with a "pong" each time. That usually solves the issue however, it does generate more traffic. If that works, you can remove the line and try this line instead:</p>
<div class="highlight"><pre><span></span><code>&quot;agentpong&quot;: 30
</code></pre></div>
<p>This will cause MeshCentral to "pong" the agent every 30 seconds, the agent will not respond. This usually fixes the issue, but you have half the traffic. I would also increase the time like:</p>
<div class="highlight"><pre><span></span><code>&quot;agentpong&quot;: 90
</code></pre></div>
<p>This is the best, you have one way traffic to all agents every 90 seconds. The larger the number you can get away with the better.</p>
<p>If you ever get the same problem but on the browser side, you can also use one of these:</p>
<div class="highlight"><pre><span></span><code>&quot;browserping&quot;: 30
&quot;browserpong&quot;: 30
</code></pre></div>
<p>Same idea, browser side instead of agent side.</p>
<h2 id="intel-amt">Intel AMT</h2>
<p>To debug issues, confirm that Intel AMT is active and there MeshCentral is not showing any red errors on the "Intel AMT" line:</p>
<p><img alt="" src="../images/amt_troubleshoot1.jpg" /></p>
<p>Next, you can go in the "My Server / Trace" tab and enable tracing on the "Intel AMT Manager" like this:</p>
<p><img alt="" src="../images/amt_troubleshoot2.jpg" /></p>
<p>You can then open another tab and select to power off or power on Intel AMT, you should see "performPowerAction" with 2 or 8 depending on power on/off.</p>
<p><img alt="" src="../images/amt_troubleshoot3.jpg" /></p>














                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="lucide lucide-circle-arrow-up" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="m16 12-4-4-4 4M12 16V8"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      
      <script id="__config" type="application/json">{"annotate":null,"base":"../..","features":["content.code.copy","content.code.select","navigation.tabs","navigation.top","navigation.sections","navigation.instant","search.suggest"],"search":"../../assets/javascripts/workers/search.e2d2d235.min.js","tags":null,"translations":{"clipboard.copied":"Copied to clipboard","clipboard.copy":"Copy to clipboard","search.result.more.one":"1 more on this page","search.result.more.other":"# more on this page","search.result.none":"No matching documents","search.result.one":"1 matching document","search.result.other":"# matching documents","search.result.placeholder":"Type to start searching","search.result.term.missing":"Missing","select.version":"Select version"},"version":null}</script>
    
    
      <script src="../../assets/javascripts/bundle.16f8adc2.min.js"></script>
      
    
  </body>
</html>